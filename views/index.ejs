<div class="container mt-4">
  <h1 class="text-center mb-4">Menu Beheer</h1>

  <table class="table table-dark table-striped">
    <thead>
      <tr>
        <th>ID</th>
        <th>Naam</th>
        <th>Categorie</th>
        <th>Prijs</th>
        <th>Afbeelding</th>
        <th>Actie</th>
      </tr>
    </thead>
    <tbody>
      <% producten.forEach(product => { %>
        <tr>
          <td><%= product.id %></td>
          <td><%= product.naam %></td>
          <td><%= product.categorie %></td>
          <td>€<%= product.prijs %></td>
          <td>
            <% if (product.afbeelding) { %>
              <img src="<%= product.afbeelding %>" alt="..." height="50">
            <% } else { %>
              <em>Geen afbeelding</em>
            <% } %>
          </td>
          <td>
            <button 
              class="btn btn-primary btn-sm edit-btn" 
              data-id="<%= product.id %>" 
              data-naam="<%= product.naam %>" 
              data-categorie="<%= product.categorie %>" 
              data-prijs="<%= product.prijs %>" 
              data-datum="<%= product.datum %>"
              data-bs-toggle="modal" 
              data-bs-target="#menuModal">
              Bewerken
            </button>
          </td>
        </tr>
      <% }) %>
    </tbody>
  </table>

  <!-- ✅ Buiten de tabel plaatsen -->
 <form method="POST" action="/bestelling">
  <input type="number" name="totaalbedrag" placeholder="Totaal €" required>
  <button type="submit">Test Bestelling</button>
</form>

</div>

<!-- JavaScript -->
<script>
  // Formulier vullen bij 'Bewerken'
  document.querySelectorAll('.edit-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      document.getElementById('itemId').value = btn.dataset.id;
      document.getElementById('itemName').value = btn.dataset.naam;
      document.getElementById('itemCategory').value = btn.dataset.categorie;
      document.getElementById('itemPrice').value = btn.dataset.prijs;
      document.getElementById('itemDate').value = btn.dataset.datum;
      document.querySelector('#menuModal .modal-title').textContent = 'Bewerk product';
    });
  });

  // Formulier resetten bij 'Nieuw item'
  document.querySelector('[data-bs-target="#menuModal"]').addEventListener('click', () => {
    document.getElementById('itemForm').reset();
    document.getElementById('itemId').value = '';
    document.querySelector('#menuModal .modal-title').textContent = 'Nieuw Menu Item';
  });

  // Verzend naar juiste route (nieuw of bewerk)
  document.getElementById('itemForm').addEventListener('submit', function () {
    const id = document.getElementById('itemId').value;
    this.action = id ? '/menu/edit' : '/menu';
  });
</script>
